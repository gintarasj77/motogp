<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>MotoGP Countdown</title>
    <script>
      (function () {
        try {
          var key = "racepulse-theme";
          var stored = localStorage.getItem(key);
          var theme = stored;
          if (theme !== "light" && theme !== "dark") {
            theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
          }
          document.documentElement.setAttribute("data-theme", theme);
        } catch (error) {
        }
      })();
    </script>
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="background">
      <div class="glow"></div>
      <div class="glow two"></div>
      <div class="noise"></div>
    </div>

    <main class="app">
      <header class="top-app-bar">
        <div class="app-brand">
          <span class="app-mark" aria-hidden="true">GP</span>
          <div class="app-brand-text">
            <strong>Race Pulse</strong>
            <span>Material dashboard</span>
          </div>
        </div>
        <button id="theme-toggle" class="theme-toggle" type="button" aria-pressed="false" aria-label="Switch to dark theme">
          <span id="theme-toggle-track" class="theme-toggle-track">
            <span class="theme-toggle-thumb"></span>
          </span>
          <span id="theme-toggle-label">Dark</span>
        </button>
      </header>

      <header class="hero">
        <div class="hero-left">
          <span id="season-tag" class="tag">MotoGP Season - Local Time</span>
          <h1 id="season-heading">Season Dashboard</h1>
          <p id="last-updated" class="hero-meta">Last updated: -</p>
        </div>
        <div class="hero-right">
          <div class="today-card">
            <span class="label">Today</span>
            <strong id="today">-</strong>
          </div>
          <div class="support-block" aria-label="Support links">
            <span class="support-label">Buy me a coffee</span>
            <div class="support-links">
              <a class="support-link" href="https://github.com/sponsors/gintarasj77" target="_blank" rel="noopener noreferrer" aria-label="GitHub Sponsors">
                <img class="support-logo" alt="GitHub" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" />
              </a>
              <a class="support-link" href="https://buy.stripe.com/28E3cneUn18y3ajgvd67S00" target="_blank" rel="noopener noreferrer" aria-label="Stripe">
                <img class="support-logo" alt="Stripe" src="https://stripe.com/favicon.ico" />
              </a>
            </div>
          </div>
        </div>
      </header>

      <section id="error-panel" class="error-panel" role="alert" hidden>
        <div class="error-copy">
          <h2>Unable to load season data</h2>
          <p id="error-message" class="note">Please check your calendar data and try again.</p>
        </div>
        <button id="error-retry" class="error-retry" type="button">Retry</button>
      </section>

      <section class="spotlight">
        <article class="panel next">
          <div class="panel-header">
            <div>
              <span class="eyebrow">Next Grand Prix</span>
              <h2 id="next-title">Loading...</h2>
            </div>
            <span class="pill" id="next-round"></span>
          </div>
          <div class="meta">
            <div>
              <span class="label">Date</span>
              <strong id="next-date">-</strong>
            </div>
            <div>
              <span class="label">Start</span>
              <strong id="next-time">-</strong>
            </div>
            <div>
              <span class="label">Location</span>
              <strong id="next-location">-</strong>
            </div>
            <div>
              <span class="label">Circuit</span>
              <strong id="next-circuit">-</strong>
            </div>
          </div>
          <div class="countdown" id="countdown">-</div>
          <p class="note" id="countdown-note"></p>
        </article>

        <aside class="panel stats">
          <h2>Season Progress</h2>
          <div class="stat-grid">
            <div>
              <span class="label">Races completed</span>
              <strong id="completed">0</strong>
            </div>
            <div>
              <span class="label">Races remaining</span>
              <strong id="remaining">0</strong>
            </div>
            <div>
              <span class="label">Total rounds</span>
              <strong id="total">0</strong>
            </div>
          </div>
          <div class="progress">
            <div class="bar" id="progress-bar"></div>
          </div>
          <p class="note" id="season-note"></p>
        </aside>
      </section>

      <section class="list">
        <div class="list-header">
          <h2>Full Calendar</h2>
          <span id="calendar-timezone" class="pill">All times local</span>
        </div>
        <div id="race-list" class="race-list"></div>
      </section>
    </main>

    <script src="race_logic.js"></script>
    <script src="data_validation.js"></script>
    <script src="app.js"></script>
    <script data-collect-dnt="true" async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
    <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif?collect-dnt=true" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript>
  </body>
</html>
